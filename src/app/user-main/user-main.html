<main class="flex flex-col gap-5">
    @if(error?.status){
        <span class="bg-red-300 text-red-600 p-5 rounded-xl flex justify-between inset-shadow-red-600/40 inset-shadow-sm self-center items-center">
            {{error?.message}}
            <button (click)="closeError()" class="text-red-600 ml-10 font-extrabold hover:cursor-pointer">X</button>
        </span>
    }
    <div class="flex justify-center gap-2 my-10">
        <input type="text" class="border-b border-b-gray-400 focus:outline-0 focus:border-b-blue-600 w-80" #filterInput>
        <button (click)="search(filterInput.value)" class="bg-blue-700 p-2 rounded-md text-white font-bold hover:bg-blue-800 w-6 h-6 relative hover:cursor-pointer">
            <span class="border-white border-2 rounded-3xl w-4 h-4 block absolute top-1 left-1"></span>
            <span class="bg-white w-0.5 h-2 block absolute right-1/6 bottom-0 
            rotate-320"></span>
        </button>
        <button (click)="reset(filterInput)" class="bg-blue-800 text-white font-extrabold rounded-md px-2 hover:cursor-pointer">
            Limpar
        </button>
    </div>
    <section class=" flex flex-row flex-wrap justify-center gap-5">

        @if(users.length === 0 && loading){
            <h1 class="font-extrabold text-2xl text-blue-600">Carregando...</h1>
        }@else{
            @if(users.length === 0 && !loading){
                <article
                    class="rounded-lg w-80 p-4 border-gray-200 border bg-white shadow-md flex justify-center flex-col wrap-break-word gap-5">
                    <h1 class="m-auto text-2xl text-red-800 font-bold">Sem usu√°rios!</h1>
                </article>
            }@else{
                @for(user of users; track user.id){
                    <article
                        class="rounded-lg max-w-80 p-4 border-gray-200 border bg-white shadow-md flex justify-center flex-col wrap-break-word gap-3">
                        <div class="flex">
                            <h3 class="rounded-md bg-pink-100 text-pink-500 px-1 w-fit h-fit font-mono ">ID:</h3>
                            <p class="ml-2 max-w-50">{{ user.id }}</p>
                        </div>
                        <div class="flex">
                            <h3 class="rounded-md bg-purple-100 text-purple-500 px-1 w-fit  h-fit font-mono ">Nome:</h3>
                            <p class="ml-2 max-w-50">{{ user.username }}</p>
                        </div>
                        <div class="flex">
                            <h3 class="rounded-md bg-fuchsia-100 text-fuchsia-500 px-1 w-fit h-fit font-mono ">Email:</h3>
                            <p class="ml-2 max-w-50">{{ user.email }}</p>
                        </div>
                        <div class="flex justify-center gap-1">
                            <a [routerLink]="['/update',user.id]" class="bg-blue-700 p-2 rounded-md text-white font-bold hover:bg-blue-800 ">Atualizar</a>
                            <a [routerLink]="['/delete', user.id]" class="bg-blue-700 p-2 rounded-md text-white font-bold hover:bg-blue-800">Deletar</a>
                        </div>
                    </article>
                }
            }
        }
        
    </section>
    
    @if(hasNextPage()){
        <button class="bg-blue-700 p-2 rounded-md text-white font-bold hover:bg-blue-800 m-auto" (click)="load()">Carregar mais...</button>
    }
    
    
</main>